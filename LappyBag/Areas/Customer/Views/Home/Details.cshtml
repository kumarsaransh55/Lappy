@model ShoppingCart

<a asp-action="Index" class="btn btn-light btn-sm text-uppercase p-2 mb-1"><i class="bi bi-arrow-left"></i> &nbsp;Back to Homepage</a>

<div class="row g-4 align-items-start">
    <!-- Image -->
    <div class="col-md-5 text-center">
        <img src="@Model.Product.ImageUrl"
             alt="@Model.Product.ModelName"
             class="img-fluid rounded shadow-sm"
             style="max-height:550px; object-fit:contain;" />

        <div class="d-flex justify-content-center mt-3">
            <form method="post" class="" style="max-width: 300px; width: 100%;" >
                <input hidden asp-for="ProductId" />
                
                <div class="input-group justify-content-center mb-3 shadow-sm">
                    <!-- MINUS BUTTON -->
                    <button type="button" class="btn btn-primary" onclick="updateCount(-1)">
                        <i class="bi bi-dash-lg"></i>
                    </button>

                    <!-- THE INPUT (Note the ID 'countInput') -->
                    <input asp-for="Count"
                           id="countInput"
                           type="number"
                           value="1" min="1" max="1000"
                           class="form-control text-center btn-outline-primary"
                           style="max-width: 80px;" />

                    <!-- PLUS BUTTON -->
                    <button type="button" class="btn btn-primary " onclick="updateCount(1)">
                        <i class="bi bi-plus-lg"></i>
                    </button>
                </div>
                <button type="submit" class="btn btn-primary w-75" name="addtoCart">Add to Cart</button>
            </form>
        </div>
    </div>
     
    <!-- Product Details -->
    <div class="col-md-7">
        <div class="card  shadow-sm border-0">
            <div class="card-body">
                <!-- Title -->
                <h3 class="fw-bold mb-3">@Model.Product.Brand @Model.Product.ModelName</h3>

                <!-- Prices -->
                <div class="mb-4">
                    <h4 class="fw-semibold mb-1 text-dark">₹ @Model.Product.ListPrice</h4>
                    <small class="text-secondary d-block mb-2">Price for 1 unit</small>

                    <div class="row text-dark">
                        <div class="col-4">
                            <div>Price for 10–25 units</div>
                            <strong class="text-primary">₹ @Model.Product.ListPrice10</strong>
                        </div>
                        <div class="col-4">
                            <div>Price for 25–50 units</div>
                            <strong class="text-primary">₹ @Model.Product.ListPrice25</strong>
                        </div>
                        <div class="col-4">
                            <div>Price for &gt;100 units</div>
                            <strong class="text-primary">₹ @Model.Product.ListPrice100</strong>
                        </div>
                    </div>
                </div>

                <!-- Specifications -->
                <h5 class="fw-semibold mb-2">Specifications</h5>
                <div class="row">
                    <div class="col-sm-6">
                        <ul class="list-unstyled mb-0">
                            <li><strong>Brand:</strong> @Model.Product.Brand</li>
                            <li class="mt-2"><strong>Model Name:</strong> @Model.Product.ModelName</li>
                            <li class="mt-2"><strong>Screen Size:</strong> @Model.Product.ScreenSize</li>
                            <li class="mt-2"><strong>Colour:</strong> @Model.Product.Colour</li>
                            <li class="mt-2"><strong>Hard Disk Size:</strong> @Model.Product.HardDiskSize</li>
                        </ul>
                    </div>

                    <div class="col-sm-6">
                        <ul class="list-unstyled mb-0">
                            <li><strong>CPU Model:</strong> @Model.Product.CpuModel</li>
                            <li class="mt-2"><strong>RAM Memory Size:</strong> @Model.Product.RamMemory</li>
                            <li class="mt-2"><strong>Operating System:</strong> @Model.Product.OS</li>
                            <li class="mt-2"><strong>Graphics Card:</strong> @Model.Product.GraphicsCard</li>
                            <li class="mt-2"><strong>Special Features:</strong> @Model.Product.SpecialFeatures</li>
                        </ul>
                    </div>
                </div>

                <!-- Description -->
                <div class="mt-4">
                    <h5 class="fw-semibold mb-2">Description</h5>
                    <div>
                        @Html.Raw(Model.Product.Description)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // 1. BUTTON LOGIC
        function updateCount(change) {
            let input = document.getElementById('countInput');
            // Parse current value (default to 0 if empty)
            let currentValue = parseInt(input.value) || 0;
            let newValue = currentValue + change;

            // Enforce Min/Max (Optional but good UX)
            if (newValue < 1) newValue = 1;
            if (newValue > 1000) newValue = 1000;

            input.value = newValue;
        }

        // 2. SCROLL LOGIC
        // We attach an event listener to the input
        document.getElementById('countInput').addEventListener('wheel', function(e) {
            // Prevent the page from scrolling down while we change the number
            e.preventDefault();

            if (e.deltaY < 0) {
                // Scrolled UP -> Add 1
                this.stepUp();
            } else {
                // Scrolled DOWN -> Subtract 1
                this.stepDown();
            }
        });
    </script>
}