@model OrderHeader

<div class="container mt-5">
    <div class="card shadow border-0 text-center p-4">
        <h2 class="text-primary">Payment Pending</h2>
        <p>Order #@Model.Id created successfully.</p>
        <p class="fs-4">Total: @(Model.OrderTotal.ToString("c"))</p>

        <button id="rzp-button1" class="btn btn-success mt-3">Pay Now</button>
    </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var options = {
        "key": "@ViewBag.KeyId",
        "amount": "@ViewBag.Amount",
        "currency": "INR",
        "name": "LappyBag",
        "description": "Order #@Model.Id",
        "order_id": "@ViewBag.OrderId", // The ID we saved in step 1
        "handler": function (response){
            // On Success, redirect to a Verification Action
            window.location.href = '/Customer/Cart/PaymentSuccess?orderHeaderId=@Model.Id'
                                 + '&payment_id=' + response.razorpay_payment_id
                                 + '&order_id=' + response.razorpay_order_id
                                 + '&signature=' + response.razorpay_signature;
        },
        "prefill": {
            "name": "@ViewBag.Name",
            "email": "@ViewBag.Email",
            "contact": "@ViewBag.Phone"
        },
        "theme": {
            "color": "#3399cc"
        }
    };

    var rzp1 = new Razorpay(options);

     //rzp1.open();
    
    document.getElementById('rzp-button1').onclick = function(e){
        rzp1.open();
        e.preventDefault();
    }
</script>